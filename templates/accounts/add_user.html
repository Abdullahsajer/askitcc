{% extends "base.html" %}
{% block title %}إضافة مستخدم جديد{% endblock %}

{% block content %}

<div class="min-h-screen flex items-center justify-center py-10">

  <div class="bg-white shadow-xl rounded-2xl p-10 w-full max-w-xl border border-gray-200">

    <!-- العنوان -->
    <h2 class="text-2xl font-bold mb-6 text-sky-700 text-center">
      إضافة مستخدم جديد
    </h2>

    <!-- رسائل Django -->
    {% if messages %}
    <div class="mb-4 space-y-2">
      {% for message in messages %}
      <div class="text-center p-3 rounded-md text-sm border
        {% if message.tags == 'error' %}
          bg-red-100 text-red-700 border-red-300
        {% elif message.tags == 'success' %}
          bg-green-100 text-green-700 border-green-300
        {% else %}
          bg-gray-100 text-gray-700 border-gray-300
        {% endif %}
      ">
        {{ message }}
      </div>
      {% endfor %}
    </div>
    {% endif %}

    <!-- نموذج إضافة المستخدم -->
    <form method="post" class="space-y-5">
      {% csrf_token %}

      <!-- اسم المستخدم -->
      <div>
        <label class="block text-sm text-gray-700 mb-1">اسم المستخدم</label>
        <input type="text" name="username" autocomplete="username" required minlength="3"
               class="w-full p-3 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-sky-500"
               placeholder="مثال: ahmed123">
      </div>

      <!-- البريد الإلكتروني -->
      <div>
        <label class="block text-sm text-gray-700 mb-1">البريد الإلكتروني</label>
        <input type="email" name="email" autocomplete="email" required
               class="w-full p-3 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-emerald-500"
               placeholder="example@email.com">
      </div>

      <!-- كلمة المرور -->
      <div>
        <label class="block text-sm text-gray-700 mb-1">كلمة المرور</label>
        <input type="password" name="password" required minlength="6" autocomplete="new-password"
               class="w-full p-3 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-sky-500"
               placeholder="••••••••">
      </div>

      <!-- الصلاحية -->
      <div>
        <label class="block text-sm text-gray-700 mb-1">الصلاحية</label>
        <select name="role" required
                class="w-full p-3 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-purple-500">
          <option value="viewer">مشاهد فقط</option>
          <option value="clearance">موظف تخليص</option>
          <option value="transport">موظف نقل</option>
          <option value="admin">مدير النظام</option>
        </select>
      </div>

      <!-- زر الإنشاء -->
      <button
        class="w-full bg-sky-600 text-white py-3 rounded-lg font-semibold text-sm hover:bg-sky-700 transition">
        إنشاء المستخدم
      </button>

    </form>

    <!-- زر الرجوع -->
    <div class="text-center mt-6">
      <a href="/accounts/users/" class="text-sky-600 hover:underline text-sm">
        ← العودة إلى قائمة المستخدمين
      </a>
    </div>

  </div>

</div>

{% endblock %}
