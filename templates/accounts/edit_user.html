{% extends "base.html" %}
{% block title %}تعديل مستخدم{% endblock %}

{% block content %}

<h2 class="text-2xl font-bold mb-6 text-sky-700">تعديل بيانات المستخدم</h2>

<div class="bg-white shadow rounded-xl p-6 w-full max-w-xl">

    <!-- نموذج تعديل بيانات المستخدم -->
    <form method="post">
        {% csrf_token %}

        <label class="block text-sm text-gray-700 mb-1">اسم المستخدم</label>
        <input type="text" name="username" value="{{ user.username }}"
               class="w-full p-3 border rounded mb-4 focus:ring-sky-300">

        <label class="block text-sm text-gray-700 mb-1">البريد الإلكتروني</label>
        <input type="email" name="email" value="{{ user.email }}"
               class="w-full p-3 border rounded mb-4 focus:ring-sky-300">

        <label class="block text-sm text-gray-700 mb-1">الصلاحية</label>
        <select name="role"
                class="w-full p-3 border rounded mb-6 bg-white focus:ring-sky-300">

            <option value="viewer" {% if profile.role == "viewer" %}selected{% endif %}>
                مشاهد فقط
            </option>

            <option value="clearance" {% if profile.role == "clearance" %}selected{% endif %}>
                موظف تخليص
            </option>

            <option value="transport" {% if profile.role == "transport" %}selected{% endif %}>
                موظف نقل
            </option>

            <option value="admin" {% if profile.role == "admin" %}selected{% endif %}>
                مدير النظام
            </option>

        </select>

        <button class="bg-emerald-600 text-white px-6 py-2 rounded hover:bg-emerald-700">
            حفظ التغييرات
        </button>
    </form>


    <!-- فاصل -->
    <hr class="my-6">


    <!-- إعادة تعيين كلمة المرور -->
    <h3 class="text-lg font-semibold text-gray-700 mb-3">
        إعادة تعيين كلمة المرور
    </h3>

    <form method="post" action="{% url 'accounts_app:reset_password' user.id %}">
        {% csrf_token %}

        <label class="block text-sm text-gray-700 mb-1">كلمة المرور الجديدة</label>
        <input type="password" name="new_password"
               class="w-full p-3 border rounded mb-4 focus:ring-sky-300"
               placeholder="••••••••">

        <button class="bg-sky-600 text-white px-6 py-2 rounded hover:bg-sky-700">
            تحديث كلمة المرور
        </button>

    </form>

</div>

{% endblock %}
